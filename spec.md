# Техническое Задание: Обновление системы управления мануалами HelperT

## 1. Общие требования к дизайну
- Применить ко всем страницам (пользовательским и админским) тёмную тему МБанк.
- Цветовая палитра: 
    - Фон (Background): `#0c0c0c`
    - Акцентный цвет (Кнопки, иконки): `#00a651` (зеленый МБанк)
    - Карточки/Контейнеры: градиент от `#1a1a1a` до более темного.
- Реализовать адаптивность для мобильных устройств.

## 2. Исправление критических багов
- **Защита от дублей (POST-Redirect-GET):** 
    - Роут `/finish_solved` не должен рендерить шаблон напрямую.
    - После отправки уведомления в Telegram роут должен делать `redirect` на новый роут `/success`.
    - Роут `/success` просто отображает страницу "Проблема решена".
- **Снятие ограничений ID:** Удалить проверку `if problem_id_int < 1 or problem_id_int > 7`. Система должна поддерживать неограниченное количество мануалов.

## 3. Функционал Администратора (CRUD)
Реализовать веб-интерфейс для управления мануалами в файле `manuals_data.json`.

### Типы мануалов:
1. **Мануал с подпроблемами:** Структура `Manual -> Subproblems -> Steps (Photo/Text)`.
2. **Простой мануал:** Структура `Manual -> Steps (Photo/Text)` (без промежуточного выбора подпроблем).

### Функции создания и редактирования:
- **Авто-нумерация:** При создании мануала программно определять следующий свободный ID и добавлять его к названию (например, ввод "Почта" преобразуется в "9. Почта").
- **Управление подпроблемами:** Возможность добавлять подпроблемы в мануалы соответствующего типа.
- **Управление шагами (инструкцией):**
    - Кнопка "Добавить шаг в начало".
    - Кнопка "Добавить шаг после текущего".
    - Удаление отдельного фото из шага.
    - Полное удаление шага (текст + фото) с подтверждением.
- **Медиа:** Интеграция с Telegram для получения `file_id` при загрузке фото/видео через веб-интерфейс.

## 4. Логика роутинга и UX
- При редактировании "Простого" мануала использовать тот же интерфейс, что и для редактирования подпроблем (единый механизм управления шагами).
- После добавления/удаления/редактирования шага или медиа-файла, администратор должен оставаться на текущей странице редактирования (редирект обратно на форму, а не в Dashboard).
- Видео должно отображаться в конце инструкции как для простых мануалов, так и для подпроблем.

## 5. Технический стек
- **Backend:** Flask.
- **Data storage:** JSON файл `manuals_data.json`.
- **Auth:** Использовать существующий класс `AdminAuth`.
- **Persistence:** Использовать методы `admin_manager.save_manuals()` для записи изменений.