# –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä

## ‚úÖ –£–ñ–ï –°–î–ï–õ–ê–ù–û (–ª–æ–∫–∞–ª—å–Ω–æ):

1. ‚úÖ –£–¥–∞–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–∫–∏ (admin/admin123, gulsaya/test123)
2. ‚úÖ –£–¥–∞–ª–µ–Ω DEV_MODE
3. ‚úÖ –ó–∞–º–µ–Ω–µ–Ω FLASK_SECRET_KEY –Ω–∞ –∫—Ä–∏–ø—Ç–æ—Å—Ç–æ–π–∫–∏–π
4. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –ø–æ–∫–∞–∑–∞ –≤—Ö–æ–¥–∞ (—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ä–µ–∞–ª—å–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏)
5. ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ª–∏—Ç—ã –≤ GitHub (Helpermain)

---

## üîß –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –ù–ê –°–ï–†–í–ï–†–ï:

### 1. –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–¥ —Å GitHub:
```bash
ssh fudo@tg-bot-cc-01
cd ~/HelperMain/helperT/Helper
git pull origin main
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å .env —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ AD –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
```bash
nano .env
```

**–ò–∑–º–µ–Ω–∏—Ç—å —ç—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```env
# AD —Å–µ—Ä–≤–µ—Ä (–í–ê–ñ–ù–û! –ü–æ–ª—É—á–∏ —É —Å–∏—Å–∞–¥–º–∏–Ω–æ–≤)
AD_SERVER=ldap://–†–ï–ê–õ–¨–ù–´–ô_IP_–ò–õ–ò_HOSTNAME
AD_PORT=389
AD_DOMAIN=mbank.local
AD_BASE_DN=DC=mbank,DC=local
AD_USE_SSL=true  # ‚Üê –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û true –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞!

# –ì—Ä—É–ø–ø–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (–ø–æ–ª—É—á–∏ —É —Å–∏—Å–∞–¥–º–∏–Ω–æ–≤)
AD_ADMIN_GROUP=CN=HelperAdmins,OU=Groups,DC=mbank,DC=local

# –¢–≤–æ–π –ª–æ–≥–∏–Ω –∫–∞–∫ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω
AD_SUPER_ADMINS=tvoy_login

# Flask —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á - –°–û–ó–î–ê–ô –ù–û–í–´–ô –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞!
FLASK_SECRET_KEY=–ù–û–í–´–ô_–°–õ–£–ß–ê–ô–ù–´–ô_–ö–õ–Æ–ß_64_–°–ò–ú–í–û–õ–ê
```

**–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π FLASK_SECRET_KEY:**
```bash
python3 -c "import secrets; print(secrets.token_hex(32))"
```

### 3. ‚ùå –í–ê–ñ–ù–û: –ù–ï –î–ï–õ–ê–ô RESTART!
**–ü–æ–∫–∞ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–∏—à—å AD - –ù–ï –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–π —Å–µ—Ä–≤–∏—Å!**

–°–µ–π—á–∞—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –≤ –ø–∞–º—è—Ç–∏ - –æ–Ω–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–∫–∞ –Ω–µ —Å–¥–µ–ª–∞–µ—à—å restart.

### 4. –ö–æ–≥–¥–∞ –ø–æ–ª—É—á–∏—à—å AD –∫—Ä–µ–¥—ã:
```bash
# –ù–∞—Å—Ç—Ä–æ–π .env (—à–∞–≥ 2)
# –ü–æ—Ç–æ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏
sudo systemctl restart bot.helper.service

# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
sudo journalctl -u bot.helper.service -f
```

---

## üìã –ß—Ç–æ –ø–æ–ª—É—á–∞—Ç —Å–∏—Å–∞–¥–º–∏–Ω—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ AD:

**–°–ø—Ä–æ—Å–∏ —É –Ω–∏—Ö:**
1. IP –∏–ª–∏ hostname AD —Å–µ—Ä–≤–µ—Ä–∞
2. –ü–æ—Ä—Ç (–æ–±—ã—á–Ω–æ 389 –∏–ª–∏ 636 –¥–ª—è SSL)
3. Base DN (–Ω–∞–ø—Ä–∏–º–µ—Ä: DC=mbank,DC=local)
4. –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ (–∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é "HelperAdmins")
5. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —á—Ç–æ —Ç–≤–æ–π –ª–æ–≥–∏–Ω –±—É–¥–µ—Ç –≤ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞—Ö

---

## üîí –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ –Ω–µ—Ç DEV_MODE
grep DEV_MODE .env
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–∏—á–µ–≥–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –Ω–∞–π—Ç–∏—Å—å!

# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ FLASK_SECRET_KEY –∏–∑–º–µ–Ω–µ–Ω
grep FLASK_SECRET_KEY .env
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "mbank_helper_production..."

# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ AD_SERVER –Ω–∞—Å—Ç—Ä–æ–µ–Ω
grep AD_SERVER .env
# –†–µ–∑—É–ª—å—Ç–∞—Ç: —Ä–µ–∞–ª—å–Ω—ã–π IP, –ù–ï "ldap://your-ad-server.local"
```

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û:

- **–ù–ï –≤–∫–ª—é—á–∞–π DEV_MODE –≤ .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** - —ç—Ç–æ —É—è–∑–≤–∏–º–æ—Å—Ç—å!
- **–ò—Å–ø–æ–ª—å–∑—É–π SSL** (AD_USE_SSL=true) –¥–ª—è –∑–∞—â–∏—Ç—ã –ø–∞—Ä–æ–ª–µ–π
- **–°–æ–∑–¥–∞–π –ù–û–í–´–ô** FLASK_SECRET_KEY –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–µ –∫–æ–ø–∏—Ä—É–π —Å –ª–æ–∫–∞–ª–∫–∏)
- **–ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞** –Ω–∞ —Ñ–∞–π–ª .env: `chmod 600 .env` (—Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü —á–∏—Ç–∞–µ—Ç)

---

## üìû –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:

1. –õ–æ–≥–∏: `sudo journalctl -u bot.helper.service -f`
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ AD: `test_login.py` —Å–∫—Ä–∏–ø—Ç –µ—Å—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ
3. –û—Ç–∫–∞—Ç: `git checkout 6559153` (–ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç –ø–µ—Ä–µ–¥ –º–æ–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏)

---

–°–æ–∑–¥–∞–Ω–æ: 2025-01-29
